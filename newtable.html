<p>Table name:<br><input id = "tablename" type="text" placeholder="Name" style="width:100%;"></p>
<p>Number of columns:<br><input type="number" value="0" id = "numcols" style="width:100%;"></p>
<table id = "columns">
</table>
<a class="button" href="javascript:alert(getCreateTableSQLQuery());">Get SQL query</a>
<a class ="button" href="javascript:executeCreateTable()">Create table</a>

<script>

$("#numcols").keyup(
function()
{
	var contents = "<tr><th>Name</th><th>Type</th><th>Can be null?</th></tr>";
	var n = $("#numcols").val();
	for (i=0;i<n;i++)
		contents += "<tr><td>" + "<input id=\"name" + i + "\">" + 
							"</td><td>" + "<select id=\"type" + i + "\">" +
							"<option>INTEGER</option><option>REAL</option><option>TEXT</option><option>BLOB</option></select>" + 
							"</td><td>" + "<input type='checkbox' id=\"null" + i + "\"></td>";
	$("#columns").html(contents);
}
);

$("#numcols").change(function(){$("#numcols").keyup();});

function executeCreateTable()
{
	executeQuery(getCreateTableSQLQuery(),
	function()
	{
		topMessage('Table created successfully.');
	},
	function()
	{
		topMessage('SQL query failed',3000,null,"red");
		$("#title").html('Failed to create table');
		$("#contents").html("Table creation failed<br><p>" + lastErr + "</p><br><a href='javascript:createTable()'>Start over</a><br><a href='javascript:listTables()'>View all tables</a>");
	});
}
	
function getCreateTableSQLQuery()
{
	var numColumns = $("#numcols").val();
	var query = "CREATE TABLE " + $("#tablename").val() + "(";
	for (var i=0;i<numColumns;i++)
	{
		if ($("#name"+i).val() == "")
		{
			alert('Column ' + i + ' has no name specified!');
			return;
		}
		query = query + $("#name" + i).val() +" "+ $("#type" + i).val() + (($("#null" + i).is(":checked"))?" NULL":" NOT NULL") + ((i==numColumns-1?"":","));
	}
	query = query + ")";
	return query;
}
</script>